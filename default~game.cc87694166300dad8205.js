(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{36:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(1),a=n(2),o=n(0),c=n(21),l=n(23),i=n(24),s=n(31),u=n(19),b=n(3),p=n(15),g=n(6),f=n(9),m=n(30),d=n(10);const O=({n:e,p:t,colorScheme:n,setColorScheme:r,setPage:c,setGameConfig:b,onboarding:O=!1})=>{const[j,h]=Object(a.useState)(O?1:3),y=!!Object(u.a)(t+n.map(e=>e.join()).join()+e,100),{rows:X,candidate:C}=Object(a.useMemo)(()=>((e,t)=>({candidate:Array.from({length:t},()=>null),rows:[Array.from({length:t},(t,n)=>n%e),...Array.from({length:t<e?1:2},()=>Object(l.a)(e,t)),...t<e?[Array.from({length:t},(n,r)=>(r+2*t)%e)]:[]].map(e=>({line:e,feedback:{correct:Math.floor(3*Math.random()),badPosition:Math.floor(3*Math.random())}}))}))(t,e),[t,e]),{t:D}=Object(i.a)();return Object(o.d)(S,null,Object(o.d)(k,null,Object(o.d)(w,{n:e,p:t,rows:X,colorScheme:n,candidate:C,solution:null,rotateAnimation:y})),Object(o.d)(A,{onSubmit:e=>{e.preventDefault(),j>=3?c("game"):h(e=>e+1)}},j>0&&Object(o.d)(P,null,Object(o.d)(x,null,D("configPage.how_many_slots")),Object(o.d)(p.a,{autoFocus:!0,min:1,max:f.a,value:e,onChange:e=>b(t,+e)})),j>1&&Object(o.d)(P,null,Object(o.d)(x,null,D("configPage.how_many_colors")),Object(o.d)(p.a,{autoFocus:!0,min:2,max:f.b,value:t,onChange:t=>b(+t,e)})),j>2&&Object(o.d)(P,{style:{flexDirection:"column"}},Object(o.d)(x,null,D("configPage.chose_color_scheme")),Object(o.d)(d.a,null),Object(o.d)(v,null,g.b.filter(e=>e.length===t).map((e,t)=>Object(o.d)(s.a,{key:t,colorScheme:e,onChange:()=>r(e),name:"color scheme",checked:Object(g.a)(e,n),style:{margin:"10px"}})))),(j<3||O)&&Object(o.d)(m.a,{type:"submit"},D(3===j?"configPage.start_game":"configPage.next"))))},j=Array.from({length:11}).map((e,t,n)=>{const r=t/(n.length-1);return`${Math.round(100*r)}%{`+"transform: "+`rotateX(${.2*Math.cos(r*Math.PI*2)}deg) `+`rotateY(${1.3*Math.sin(r*Math.PI*2)}deg) `+"}"}),h=o.e`${j.join("\n")}`,y=o.e`
  0% { transform: scale(0.35) rotateY(-20deg) rotateX(44deg) }
  100% { transform: scale(0.4) rotateY(24deg) rotateX(44deg) }
`,w=Object(r.a)(c.a,{target:"e1nl10t00"})("transform:scale(0.4) rotateY(24deg) rotateX(44deg);animation:",e=>e.rotateAnimation?y:"none"," 100ms ease-out;"),v=Object(r.a)("div",{target:"e1nl10t01"})({name:"lzy80o",styles:"display:flex;flex-direction:row;flex-wrap:wrap;margin:-10px;"}),x=Object(r.a)("label",{target:"e1nl10t02"})({name:"1po99kh",styles:"margin-right:auto;"}),P=Object(r.a)("section",{target:"e1nl10t03"})({name:"92qcqj",styles:"padding:10px;display:flex;flex-direction:row;"}),S=Object(r.a)("div",{target:"e1nl10t04"})({name:"p5f731",styles:"margin-bottom:140px;touch-action:auto;"}),k=Object(r.a)(b.a,{target:"e1nl10t05"})("display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:400px;perspective:600px;animation ",h," 5000ms linear infinite;"),A=Object(r.a)("form",{target:"e1nl10t06"})({name:"1tcv91l",styles:"margin:0 auto;max-width:520px;"})},39:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(1),a=n(36),o=n(58),c=n(10),l=n(55),i=n(48),s=n(0);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const p=()=>{const t=Object(l.a)(),{page:n,setPage:r,reset:a}=t,o=b(t,["page","setPage","reset"]);return Object(s.d)(e.Fragment,null,Object(s.d)(g,u({page:n,setPage:r},o)),Object(s.d)(f,null,"game"===n&&Object(s.d)(e.Fragment,null,Object(s.d)(c.a,null),Object(s.d)("a",{href:"/mm/solver",target:"_blank"},Object(s.d)("label",null,"open solver"))),"game"!==n&&Object(s.d)(e.Fragment,null,Object(s.d)(c.a,null),Object(s.d)("a",{href:"#",onClick:()=>r("game")},Object(s.d)("label",null,"game"))),"onboarding"!==n&&"config"!==n&&Object(s.d)(e.Fragment,null,Object(s.d)(c.a,null),Object(s.d)("a",{href:"#",onClick:()=>r("config")},Object(s.d)("label",null,"config"))),"game"===n&&Object(s.d)(e.Fragment,null,Object(s.d)(c.a,null),Object(s.d)("a",{href:"#",onClick:a},Object(s.d)("label",null,"reset"))),Object(s.d)(c.a,null),Object(s.d)("a",{title:"github",href:"https://github.com/platane/mm"},Object(s.d)(i.a,{style:{width:"16px",height:"16px",fill:"#111"}}))))},g=e=>{let{page:t}=e,n=b(e,["page"]);switch(t){case"game":return Object(s.d)(o.a,n);case"config":return Object(s.d)(a.a,n);case"onboarding":return Object(s.d)(a.a,u({onboarding:!0},n));default:return null}},f=Object(r.a)("footer",{target:"exryqlh0"})({name:"1au8574",styles:"position:fixed;bottom:0;right:16px;padding:4px;"})}).call(this,n(2))},45:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(1),a=n(5),o=n(0),c=n(24),l=n(8),i=n(46);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const b=t=>{let{step:n}=t,r=u(t,["step"]);const a=Object(i.a)(n,200);return Object(o.d)(e.Fragment,null,Object(o.d)(p,s({},r,{key:n||"",step:n})),a!==n&&Object(o.d)(p,s({},r,{key:a||"",step:a,down:"shuffle"!==a&&a!==n})))},p=e=>{let{step:t}=e,n=u(e,["step"]);const{t:r}=Object(c.a)();switch(t){case"shuffle":return Object(o.d)(m,n,r("instruction.shuffle"));case"win":return Object(o.d)(f,n,r("instruction.win"));case"firstPlay":return Object(o.d)(j,n,r("instruction.firstPlay"));default:return null}},g=o.e`
  0%{
    opacity:0;
    transform: translateZ(-40px) rotateX(-50deg) scale(0.8,0.8);
  }
  100%{ 
    opacity:1;
    transform:  rotateX(-50deg);
  }
`,f=Object(r.a)("label",{target:"e1b6l49e0"})("white-space:nowrap;transform:rotateX(-50deg);",l.c," ",e=>e.down?Object(a.a)("animation:",g," 220ms linear reverse;"):Object(a.a)("animation:",g," 180ms linear normal;")),m=f,d=o.e`
  0%{
    opacity:0;
    transform: translateZ(-45px) rotateX(-50deg);
  }
  75%{
    opacity:0;
    transform: translateZ(-34px) rotateX(-50deg);
  }
  82%{
    opacity:1;
    transform: translateZ(0px) rotateX(-50deg);
  }
  95%{ 
    transform: translateZ(36px) rotateX(-50deg) scale(1.15,0.9);
  }
  100%{ 
    transform: translateZ(34px) rotateX(-50deg);
  }
`,O=o.e`
0%{ 
  transform: translateZ(40px) rotateX(-50deg);
  opacity:1;
}
100%{ 
  transform: translateZ(-40px) rotateX(-50deg);
  opacity:0;
}
`,j=Object(r.a)("label",{target:"e1b6l49e1"})("transform:translateZ(40px) rotateX(-50deg);white-space:nowrap;",l.c," ",e=>e.down?Object(a.a)("animation:",O," 200ms linear;"):Object(a.a)("animation:",d," 600ms linear;"))}).call(this,n(2))},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2);const a=(e,t=0)=>{const[n,a]=Object(r.useState)(e);return Object(r.useEffect)(()=>{const n=setTimeout(()=>a(e),t);return()=>clearTimeout(n)},[e]),n}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(0);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const c=e=>Object(a.d)(l,o({viewBox:"0 0 1 1"},e),Object(a.d)("path",{d:"M.933.261A.498.498 0 00.249.08a.498.498 0 00-.154.727.49.49 0 00.247.18C.353.99.362.988.368.983a.026.026 0 00.008-.02 15.138 15.138 0 000-.092L.36.872A.268.268 0 01.28.87.1.1 0 01.235.85.083.083 0 01.207.81L.201.795A.16.16 0 00.18.762.078.078 0 00.15.737L.148.735A.052.052 0 01.14.726.036.036 0 01.133.717C.132.714.133.712.136.71a.042.042 0 01.02-.003l.012.002a.107.107 0 01.064.05c.01.017.022.03.036.04.014.01.028.014.043.014A.19.19 0 00.348.81.128.128 0 00.377.8.106.106 0 01.409.733.446.446 0 01.342.72.268.268 0 01.281.696.175.175 0 01.194.584.325.325 0 01.181.486.19.19 0 01.233.352.175.175 0 01.237.219C.25.215.268.22.293.228A.39.39 0 01.375.27a.461.461 0 01.25 0L.65.255A.353.353 0 01.71.226C.733.218.75.216.763.22c.02.05.02.093.005.133a.19.19 0 01.051.134c0 .037-.004.07-.013.098A.203.203 0 01.77.652.183.183 0 01.72.696.268.268 0 01.657.72a.448.448 0 01-.066.012c.022.02.034.05.034.092v.138c0 .007.002.014.008.02.005.004.014.006.025.004A.49.49 0 00.905.806.486.486 0 001 .512a.49.49 0 00-.067-.25z"})),l=Object(r.a)("svg",{target:"ek6phhc0"})()},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n(2),a=n(35),o=n(33),c=n(32),l=n(23),i=n(14);const s=(e,t)=>({rows:[],solution:Object(l.a)(e,t),id:Object(i.a)()});var u=n(6),b=n(9);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=(e=>(t,n)=>{const r=e(t,n);return r.p===r.colorScheme.length?r:g(g({},r),{},{colorScheme:u.b.find(e=>e.length===r.p)})})((e=>(t,n)=>{const r=e(t,n);return r.p===t.p&&r.n===t.n?r:g(g({},r),{},{game:s(r.p,r.n)})})((d=(e,t)=>{switch(t.type){case"colorScheme:set":return g(g({},e),{},{colorScheme:t.colorScheme});case"game:config:set":return g(g({},e),{},{n:t.n||e.n,p:t.p||e.p});case"game:reset":return g(g({},e),{},{game:s(e.p,e.n)});case"game:play":return Object(o.a)(e,({game:{solution:e,rows:n}})=>{n.push({line:t.line,feedback:Object(c.a)(e,t.line)})});case"page:set":return g(g({},e),{},{page:t.page});default:return e}},(e,t)=>{const n=d(e,t);return n.p>10||n.n>10?g(g({},n),{},{n:Math.min(b.a,n.n),p:Math.min(b.b,n.p)}):n})));var d,O=n(25);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y=()=>{const e=O.a("game-config");let t=m({n:0,p:0,colorScheme:[],game:{id:"",rows:[],solution:[]},page:"game"},{type:"game:config:set",p:6,n:4});if(e&&e.p&&e.n&&(t=m(t,{type:"page:set",page:"game"}),t=m(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"game:config:set"},e))),e&&e.colorScheme){const n=u.b.find(t=>Object(u.a)(t,e.colorScheme));n&&(t=m(t,{type:"colorScheme:set",colorScheme:n}))}return t};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=()=>{const[e,t]=Object(r.useReducer)(m,null,y),n=Object(r.useRef)(""),o=Object(r.useCallback)(e=>{e.sessionId===n.current&&t(e)},[]),{publish:c,clientId:l}=Object(a.a)(o);n.current=l,Object(r.useEffect)(()=>{(({n:e,p:t,colorScheme:n})=>{O.b("game-config",{n:e,p:t,colorScheme:n})})(e)},[e.n,e.p,e.colorScheme]),Object(r.useEffect)(()=>{c({type:"session:updated",sessionId:n.current,session:{date:Date.now(),id:n.current,n:e.n,p:e.p,colorScheme:e.colorScheme,game:{rows:e.game.rows,id:e.game.id}}})},[e.game,c]);const i=Object(r.useMemo)(()=>{const e=e=>{t(e),c(v(v({},e),{},{sessionId:n.current}))};return{setPage:e=>{t({type:"page:set",page:e})},play:t=>{e({type:"game:play",line:t})},reset:()=>{e({type:"game:reset"})},setColorScheme:t=>{e({type:"colorScheme:set",colorScheme:t})},setGameConfig:(t,n)=>{e({type:"game:config:set",p:t,n:n})}}},[t,c]);return v(v({},e),i)}},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(5),a=n(1),o=n(2),c=n(0),l=n(19),i=n(3),s=n(21),u=n(7),b=n(22),p=n(4);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const m=e=>{let{p:t,disabled:n,colorScheme:r,hintAnimation:a=!1}=e,o=f(e,["p","disabled","colorScheme","hintAnimation"]);const{onPointerDown:l}=Object(b.b)();return Object(c.d)(O,g({},o,{disabled:n}),Array.from({length:t},(e,n)=>Object(c.d)(h,{key:n,hintAnimation:n===t-1&&a,onPointerDown:l({peg:n})},Array.from({length:3},(e,t)=>Object(c.d)(u.a,{key:t,color:r[n],size:20,style:{margin:"2px",transform:"translate3d(0px,0px,4px) "+`rotateY(${n*(n+1)*t*t*63%45-20}deg) `+`rotateX(${(n+1)*t*t*t*37%45-20}deg) `}})))))};var d={name:"m74pe7",styles:"transition:transform 200ms ease;transform:translate3d(40px,0,-120px) scale(0.8) rotateY(-10deg);"};const O=Object(a.a)(i.a,{target:"eb1sg750"})("transform:translate3d(0,0,-30px);transition:transform 80ms ease;",e=>e.disabled?d:""),j=c.e`
0%{
  transform: scale(1,1);
  background-color: ${p.a}66;
}
84%{
  transform: scale(1,1);
  background-color: ${p.a}66;
}
90%{
  transform: translateZ(16px) scale(1.15,1.15);
  background-color: ${p.b}66;
}
100%{
  transform: scale(1,1);
  background-color: ${p.a}66;
}

`,h=Object(a.a)(i.a,{target:"eb1sg751"})("width:72px;height:60px;background-color:",p.a,"66;border-radius:4px;margin:2px;position:relative;display:flex;flex-direction:row;align-items:center;justify-content:center;pointer-events:auto;& > *{pointer-events:none;}",e=>e.hintAnimation?Object(r.a)("animation:",j," 1200ms linear infinite 1200ms;"):"");var y=n(45);const w=(e,t,n=!0)=>e.map((e,r)=>t.destination&&t.destination.k===r&&n?t.origin.peg:t.destination&&t.destination.k===r&&null!==e||t.origin.k===r?null:e),v=({n:e,p:t,game:n,play:r,colorScheme:a})=>{const[i,u]=Object(o.useState)([]),[p,g]=Object(o.useState)(Array.from({length:e},()=>null)),f=i.reduce((e,t)=>w(e,t,!1),p),d=n.rows.some(({feedback:t})=>t.correct===e),O=!!Object(l.a)(n.id+"-"+n.rows.length,300),j=!!Object(l.a)(n.id,400,!1),h=!!Object(l.a)(n.id,2600);return Object(c.d)(b.a,{colorScheme:a,onTemporaryMutationsChange:u,onChange:e=>g(t=>w(t,e))},Object(c.d)(S,{resetAnimation:j,popAnimation:O},Object(c.d)(k,null,Object(c.d)(A,{step:(d?"win":h&&"shuffle")||0===i.length&&p.every(e=>null===e)&&0==n.rows.length&&"firstPlay"||null}),Object(c.d)(m,{hintAnimation:!d&&!h&&0===i.length&&p.every(e=>null===e)&&0==n.rows.length,colorScheme:a,p:t,disabled:i.length>0}),Object(c.d)(s.a,{n:e,p:t,id:n.id,rows:n.rows,colorScheme:a,candidate:f,solution:d?n.solution:null,shuffle:h,onSubmit:p.every(e=>null!==e)?()=>{r(p),g(Array.from({length:e},()=>null))}:void 0,style:{flex:"auto 1 1",marginRight:"30px"},displayCandidateGhost:i.length>0&&i.every(e=>!e.destination)&&p.every(e=>null===e)&&0==n.rows.length}))))},x=c.e`
  0%{ transform: scale(1) }
  40%{ transform: scale(1.1) }
  100%{ transform: scale(1) }
 `,P=c.e`
  0%{ transform: rotateX(0deg) }
  22%{ transform:  rotateX(60deg) translateZ(-600px) }
  60%{ transform:  rotateX(-10deg) translateZ(-160px) scale(1,1) }
  75%{ transform:  rotateX(-12deg) translateZ(-180px) scale(1.13,1.06) }
  100%{ transform: rotateX(0deg) }
 `,S=Object(a.a)(i.a,{target:"e3re3iy0"})("perspective:1000px;",e=>e.resetAnimation?Object(r.a)("animation:",P," 430ms linear;transform-origin:center bottom;"):e.popAnimation?Object(r.a)("animation:",x," 230ms linear;"):""),k=Object(a.a)(i.a,{target:"e3re3iy1"})({name:"171gzy2",styles:"transform:rotateY(10deg) rotateX(35deg);display:flex;justify-content:center;align-items:center;touch-action:none;"}),A=Object(a.a)(y.a,{target:"e3re3iy2"})({name:"vhb79q",styles:"padding-left:44px;position:absolute;top:-74px;"})},65:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(27),o=n(39),c=n(34),l=n(8),i=n(0);const s=document.createElement("div");document.body.appendChild(s),s.id="root",Object(a.render)(Object(i.d)(r.StrictMode,null,Object(i.d)(l.a,null),Object(i.d)(c.a,null),Object(i.d)(r.Suspense,{fallback:null},Object(i.d)(o.a,null))),s),"serviceWorker"in navigator&&navigator.serviceWorker.register("../service-worker.js")}}]);